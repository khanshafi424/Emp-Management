<div class="container-fluid mt-4">
  <div class="card shadow-sm">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h5 class="mb-0 text-warning"><i class="fa fa-calendar me-2"></i>Leave Balance</h5>
      <button
        class="btn btn-warning btn-sm"
        data-bs-toggle="modal"
        (click)="openformModel()"
        data-bs-target="#leaveModal"
      >
        <i class="fa fa-plus me-1"></i> Add Leave
      </button>
    </div>

    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
          <thead class="table-light">
            <tr>
              <th>#</th>
              <th>Employee ID</th>
              <th>Employee Name</th>
              <th>Leave Type</th>
              <th>Count</th>
              <th>Updated Date</th>
              <th>Updated By</th>
              <th class="text-center">Actions</th>
            </tr>
          </thead>
          <tbody>
            <!-- Sample Row -->
            @for (item of allLeaves(); track $index) {
            <tr>
              <td>{{ $index + 1 }}</td>
              <td>{{ item.empId }}</td>
              <td>{{ item.empName }}</td>
              <td>
                <!-- <span class="badge bg-info">{{item.leaveType}}</span> -->
                <span
                  class="badge"
                  [ngClass]="{
                    'bg-info': item.leaveType === 'sickLeave',
                    'bg-warning': item.leaveType !== 'sickLeave'
                  }"
                >
                  {{ item.leaveType }}
                </span>
              </td>
              <td>{{ item.count }}</td>
              <td>{{ item.updatedDate | date : 'dd/mm/yyyy' }}</td>
              <td>{{ item.updateBy }}</td>
              <td class="text-center">
                <button class="btn btn-sm btn-outline-primary me-1">
                  <i class="fa fa-edit"></i>
                </button>
                <button class="btn btn-sm btn-outline-danger">
                  <i class="fa fa-trash"></i>
                </button>
              </td>
            </tr>
            }

            <!-- Empty State -->
            <!--
            <tr>
              <td colspan="7" class="text-center text-muted py-4">
                No leave records found
              </td>
            </tr>
            -->
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<div class="modal" #formModel tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <!-- Modal Header -->
      <div class="modal-header bg-warning text-white">
        <h5 class="modal-title"><i class="fa fa-calendar-check me-2"></i>Leave Balance</h5>
        <button
          type="button"
          class="btn-close btn-close-white"
          data-bs-dismiss="modal"
          (click)="closeformModel()"
        ></button>
      </div>

      <!-- Modal Body -->
      <div class="modal-body">
        <form>
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">Employee ID</label>
              <select class="form-select" name="empId" [(ngModel)]="leaveBalanceObj.empId">
                <option [ngValue]="null" disabled>Select Employee</option>
                @for (item of employeeList$ | async; track item.empId) {
                <option [ngValue]="item.empId">{{ item.empName }}</option>
                }
              </select>
            </div>

            <div class="col-md-6">
              <label class="form-label">Leave Type</label>
              <select class="form-select" name="leaveType" [(ngModel)]="leaveBalanceObj.leaveType">
                <option value="" selected disabled>Select Leave Type</option>
                <option value="sickLeave">Sick Leave</option>
                <option value="PaidLeave">Paid Leave</option>
              </select>
            </div>

            <div class="col-md-6">
              <label class="form-label">Leave Count</label>
              <input
                type="number"
                name="count"
                [(ngModel)]="leaveBalanceObj.count"
                class="form-control"
                placeholder="Enter count"
              />
            </div>
          </div>
        </form>
      </div>

      <!-- Modal Footer -->
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal" (click)="closeformModel()">
          Cancel
        </button>
        <button class="btn btn-warning" (click)="onSubmit()">
          <i class="fa fa-save me-1"></i>Save
        </button>
      </div>
    </div>
  </div>
</div>
